const stateOptions={USA:[{text:"Select your State",value:""},{text:"Alabama",value:"AL"},{text:"Alaska",value:"AK"},{text:"Arizona",value:"AZ"},{text:"Arkansas",value:"AR"},{text:"California",value:"CA"},{text:"North Carolina",value:"NC"},{text:"South Carolina",value:"SC"},{text:"Colorado",value:"CO"},{text:"Connecticut",value:"CT"},{text:"North Dakota",value:"ND"},{text:"South Dakota",value:"SD"},{text:"Delaware",value:"DE"},{text:"Florida",value:"FL"},{text:"Georgia",value:"GA"},{text:"Hawaii",value:"HI"},{text:"Idaho",value:"ID"},{text:"Illinois",value:"IL"},{text:"Indiana",value:"IN"},{text:"Iowa",value:"IA"},{text:"Kansas",value:"KS"},{text:"Kentucky",value:"KY"},{text:"Louisiana",value:"LA"},{text:"Maine",value:"ME"},{text:"Maryland",value:"MD"},{text:"Massachusetts",value:"MA   "},{text:"Michigan",value:"MI"},{text:"Minnesota",value:"MN"},{text:"Mississippi",value:"MS"},{text:"Missouri",value:"MO"},{text:"Montana",value:"MT"},{text:"Nebraska",value:"NE"},{text:"Nevada",value:"NV"},{text:"New Jersey",value:"NJ"},{text:"New York",value:"NY"},{text:"New Hampshire",value:"NH"},{text:"New Mexico",value:"NM"},{text:"Ohio",value:"OH"},{text:"Oklahoma",value:"OK"},{text:"Oregon",value:"OR"},{text:"Pennsylvania",value:"PA"},{text:"Rhode Island",value:"RI"},{text:"Tennessee",value:"TN"},{text:"Texas",value:"TX"},{text:"Utah",value:"UT"},{text:"Vermont",value:"VT"},{text:"Virginia",value:"VA"},{text:"West Virginia",value:"WV"},{text:"Washington",value:"WA"},{text:"Wisconsin",value:"WI"},{text:"Wyoming",value:"WY"}],MEX:[{text:"Select your State",value:""},{text:"Aguascalientes",value:"Aguascalientes"},{text:"Baja California",value:"Baja California"},{text:"Baja California Sur",value:"Baja California Sur"},{text:"Campeche",value:"Campeche"},{text:"Chiapas",value:"Chiapas"},{text:"Chihuahua",value:"Chihuahua"},{text:"Coahuila de Zaragoza",value:"Coahuila de Zaragoza"},{text:"Colima",value:"Colima"},{text:"Durango",value:"Durango"},{text:"Guanajuato",value:"Guanajuato"},{text:"Guerrero",value:"Guerrero"},{text:"Hidalgo",value:"Hidalgo"},{text:"Jalisco",value:"Jalisco"},{text:"México",value:"México"},{text:"Ciudad de México",value:"Ciudad de México"},{text:"Michoacán de Ocampo",value:"Michoacán de Ocampo"},{text:"Morelos",value:"Morelos"},{text:"Nayarit",value:"Nayarit"},{text:"Nuevo León",value:"Nuevo León"},{text:"Oaxaca",value:"Oaxaca"},{text:"Puebla",value:"Puebla"},{text:"Querétaro de Arteaga",value:"Querétaro de Arteaga"},{text:"Quintana Roo",value:"Quintana Roo"},{text:"San Luis Potosí",value:"San Luis Potosí"},{text:"Sinaloa",value:"Sinaloa"},{text:"Sonora",value:"Sonora"},{text:"Tabasco",value:"Tabasco"},{text:"Tamaulipas",value:"Tamaulipas"},{text:"Tlaxcala",value:"Tlaxcala"},{text:"Veracruz",value:"Veracruz"},{text:"Yucatán",value:"Yucatán"},{text:"Zacatecas",value:"Zacatecas"}],CAN:[{text:"Select your State",value:""},{text:"Ontario",value:"OT"},{text:"Quebec",value:"QC"},{text:"Nova Scotia",value:"NS"},{text:"New Brunswick",value:"NB"},{text:"Manitoba",value:"MB"},{text:"Northwest Territories",value:"NT"},{text:"British Columbia",value:"BC"},{text:"Prince Edward Island",value:"PE"},{text:"Yukon",value:"YT"},{text:"Saskatchewan",value:"SK"},{text:"Alberta",value:"AB"},{text:"Newfoundland and Labrador",value:"NL"},{text:"Nunavut",value:"NU"}]};function getUrlData(){const e=new URL(window.location.href),a={};for(const[t,o]of e.searchParams.entries())a[t]=o;return JSON.stringify(a)}function changeStateOptions(e){console.log("changeStateOptions");const a=$("#shippingState");a.empty(),e.forEach((e=>{const t=$("<option></option>").attr("value",e.value).text(e.text);a.append(t)}))}const setUpMask=()=>{console.log("setUpMask"),$("#x_cvv").mask("0000"),$("#x_card_num").mask("0000000000000000")},setTouchClass=()=>{$("body").addClass("ontouchstart"in window?"touchevents":"no-touchevents")};function setUpTooltips(){console.log("setUpTooltips");var e="";e=(window.innerWidth,"bottom"),$('input[type="text"], input[type="email"], input[type="tel"], select, .form-control, .field_design').tooltipster({trigger:"custom",onlyOne:!1,position:e,theme:"tooltipster-punk",offsetY:-4,animation:"grow",updateAnimation:!1})}const getOfferSelection=()=>$("input[name='offer-option']:checked").val();$("input[name='offer-option']").on("click",(()=>{const e=getOfferSelection();console.log(e),"month"===e?($("#product_id").val("388"),$("#package299Modal").modal("show"),$("#upgrade_product").val("572"),$("#upgrade_campaign").val("123"),$("#gold-upgrade").contents().last().replaceWith("$39.95/Monthly Gold includes up to 90% commission"),$("#platinum-upgrade").contents().last().replaceWith("$49.95/Monthly Platinum includes up to 90% commission")):($("#product_id").val("389"),$("#platinum-upgrade").contents().last().replaceWith("$399/Annually Platinum includes up to 90% commission"),$("#gold-upgrade").contents().last().replaceWith("$299/Annually Gold includes up to 70% commision"))}));const getSelectedUpgrade=()=>$("input[name='upgrade-option']:checked").val();function setUpValidation(){$("#threeDForm").validate({errorPlacement:function(e,a){$(a).tooltipster("update",$(e).text()),$(a).tooltipster("show")},success:function(e,a){$(a).tooltipster("hide")},rules:{shippingAddress1:{required:!0},shippingCity:{required:!0},shippingZip:{required:!0},x_card_num:{required:!0,creditcard:!0},creditCardType:{required:!0},x_cvv:{required:!0},x_exp_month:{required:!0},x_exp_year:{required:!0}},onkeyup:!1,submitHandler:async function(e,a){a.preventDefault(),$(".billing-info").LoadingOverlay("show",{text:"Please wait..."});const t=e=>new Promise((a=>setTimeout(a,e)));var o={};try{for(let e=1;e<=15;e++){if(await t(1e3),console.log("waiting... "+e),"0"===$("#threeds_processing").val())throw console.log("Inside If"),o}}catch(a){if(a!==o)throw a;$(".billing-info").LoadingOverlay("hide"),e.submit()}}})}function changePackage(){var e=$(this).attr("id");$(".package-item").removeClass("checked"),$(this).parent("label").addClass("checked"),console.log(e),"paymentPackage39_95"==e?($("#product_id").val($("#product_monthly_id").val()),$("#package299Modal").modal("show")):$("#product_id").val($("#product_full_id").val())}function paymentPackage299(e){$("#package299Modal").modal("hide");var a=$(this).attr("href");console.log(a),$(a).prop("checked",!0),$(".package-item").removeClass("checked"),$(".package-b").addClass("checked"),$("#product_id").val($("#product_full_id").val())}function SetCreditCardImage(){var e=$("#creditCardType").val();console.log(e);const a={amex:"amex",discover:"discover",master:"mastercard",visa:"visa",default:"cc-default"},t=a[e]||a.default;$("#x_card_num").removeClass("cc-default visa visa-electron mastercard maestro discover amex").addClass(t)}function threeDSprocessing(){const e=$("#x_exp_month").val(),a=$("#x_exp_year").val(),t=$("#x_card_num").val(),o=$("#x_exp_month_hid").val(),n=$("#x_exp_year_hid").val(),l=$("#x_card_num_hid").val();(e!==o||a!==n||t!==l)&&(e&&a&&t)&&($("#x_exp_month_hid").val(e),$("#x_exp_year_hid").val(a),$("#x_card_num_hid").val(t),$("#threeds_processing").val("1"),setTimeout((()=>$("#threeds_processing").val("0")),15e3))}function getUserIp(){return new Promise((function(e,a){$.get("https://ipv4.jsonip.com/").done((function(a){e(a.ip)})).fail((function(e){a(e)}))}))}function createContactSalesmate(){console.log("createContactSalesmate");var e=$("#shippingFirstName").val(),a=$("#shippingLastName").val(),t=$("#email").val(),o=$("#phone").val(),n=($("#shippingAddress1").val(),$("#shippingAddress2").val(),$("#Country_label").val(),$("#shippingState").val(),$("#shippingCity").val(),$("#shippingZip").val(),$("#campaign_id").val()),l=$("#AFFID").val(),i=$("#AFID").val();if(e&&a&&(t||o)){var r="https://hooks.zapier.com/hooks/catch/2695602/3uwycf9/?step1=&campaign_id="+n+"&afid="+i+"&AFFID="+l+"&or_afid=&or_affid=&fbclid=&first_name="+e+"&last_name="+a+"&email="+encodeURIComponent(t)+"&phone="+encodeURIComponent(o);console.log(r),jQuery.ajax({type:"GET",url:r,success:function(e){console.log("The Contact has been created correctly on Salesmate")},error:function(e){console.log("error during Contact creation")},dataType:"jsonp"})}}function validateCoupon(){console.log("function is running"),$("#promoCode").next("span").remove();var e=$("#promoCode").val(),a=$("#email").val();if(console.log(e),e){console.log("Discount Value inserted");var t={campaignId:$("#campaign_id").val(),productId:$("#product_id").val(),email:a,promoCode:e};jQuery.ajax({url:"https://globaltravel.com/wp-content/themes/bridge-child/limelight/coupon_validation.php",type:"POST",dataType:"json",data:JSON.stringify(t),success:function(e){if(100==e.response_code){var a=e.coupon_amount;$("#promoCode").next("span").remove(),$("<span style='color:#3A98B9; font-weight:600; text-align: center'>You have a $"+a+" discount</span>").insertAfter("#promoCode")}else $("#promoCode").next("span").remove(),$("<span style='color:#FC2947; font-weight:600; text-align: center'>The Coupon you used is not Valid for this product</span>").insertAfter("#promoCode")}})}}$("input[name='upgrade-option']").on("click",(()=>{let e=$("input[name='upgrade-option']:checked").val();console.log(e);let a=getOfferSelection();"month"===a&&"gold-month"===e&&($("#upgrade_product").val("572"),$("#upgrade_campaign").val("123")),"month"===a&&"platinum-month"===e&&($("#upgrade_product").val("573"),$("#upgrade_campaign").val("125")),"annual"===a&&"gold-month"===e&&($("#upgrade_product").val("575"),$("#upgrade_campaign").val("123")),"annual"===a&&"platinum-month"===e&&($("#upgrade_product").val("576"),$("#upgrade_campaign").val("125")),"no-upgrade"===e&&($("#upgrade_product").val(""),$("#upgrade_campaign").val(""))})),$(document).ready((function(){const e=JSON.parse(getUrlData());console.log(e),$("#shippingFirstName").val(e.first_name),$("#shippingLastName").val(e.last_name),$("#email").val(e.email),$("#phone").val(e.phone),$("#AFFID").val(e.AFFID),$("#AFID").val(e.afid),$("#shippingCountry").on("change",(function(){console.log("changeStateOptions executed");const e=$(this).val();changeStateOptions(stateOptions[e]||stateOptions.USA)})),$("#cardHolderName").val(e.first_name+" "+e.last_name),console.log("setUpMask"),$("#x_cvv").mask("0000"),$("#x_card_num").mask("0000000000000000"),$("body").addClass("ontouchstart"in window?"touchevents":"no-touchevents"),setUpValidation(),createContactSalesmate(),$("input[name='paymentPackage']").on("change",(function(){var e=$(this).attr("id");validateCoupon(),$(".package-item").removeClass("checked"),$(this).parent("label").addClass("checked"),"paymentPackage39_95"==e?($("#product_id").val($("#product_monthly_id").val()),$("#package299Modal").modal("show"),$("#next_step_page").val("https://enroll.globaltravel.com/perfmax-thank-you")):($("#product_id").val($("#product_full_id").val()),$("#next_step_page").val("https://enroll.globaltravel.com/perfmax-upgrade-offer-yearly"))})),$(".pack-content__buttons .btn-yes").click((function(e){e.preventDefault(),$("#package299Modal").modal("hide");var a=$(this).attr("href");$(a).prop("checked",!0),$(".package-item").removeClass("checked"),$(".package-b").addClass("checked"),$("#product_id").val($("#product_full_id").val())})),$(".pack-content__buttons .btn-no").click((function(e){e.preventDefault(),$("#package299Modal").modal("hide");var a=$(this).attr("href");$(a).prop("checked",!0),$(".package-item").removeClass("checked"),$(".package-a").addClass("checked"),$("#product_id").val($("#product_monthly_id").val())})),$("#promoCode").keyup(validateCoupon())})),$(document).ready((function(){$("#promoCode").keyup((function(){let e;var a=$(this).val();console.log(a);var t={campaignId:$("#campaign_id").val(),productId:$("#product_id").val(),email:email,promoCode:a};jQuery.ajax({url:"https://globaltravel.com/wp-content/themes/bridge-child/limelight/coupon_validation.php",type:"POST",dataType:"json",data:JSON.stringify(t),success:function(a){100==a.response_code?(e=a.coupon_amount,$("#coupon_amount").val(e),$("#promoCode").next("span").remove(),$("<span style='color:#3A98B9; font-weight:600; text-align: center'>You have a $"+e+" discount</span>").insertAfter("#promoCode")):($("#promoCode").next("span").remove(),$("<span style='color:#FC2947; font-weight:600; text-align: center'>The Coupon you used is not Valid for this product</span>").insertAfter("#promoCode"))}})}))})),$(document).ready((function(){document.querySelectorAll('[data-bs-toggle="popover"]').forEach((e=>{new bootstrap.Popover(e)})),$("#benefit-popover").on("show.bs.dropdown",(function(){console.log("Dropdown shown")})),$("#btn_submit_form").click((function(){$(".billing-info").LoadingOverlay("show",{text:"Please wait..."})})),$(".close").click((function(){$("#package299Modal").modal("hide")}))}));